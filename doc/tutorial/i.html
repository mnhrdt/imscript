
<!-- This document is a "semi-literate" program.  To re-compute the figures,
	run the script "build.sh" from inside the directory "f".  Note that you can
	change the source images (A, B, X, ...), but they should be of a similar size
	or the layout will be broken.
-->

<html>
	<head>
		<style>
body {max-width: 60em; margin-left:1em;}
.gallery {position:relative;width:auto;height:400px}
.gallery .index{padding:0;margin:0;width:11em;list-style:none}
.gallery .index li{margin:0;padding:0}
.gallery .index a{display:block;background-color:#eee;border:1px solid #fff;text-decoration:none;width:13em;padding:5px}
.gallery .index a span{display:block;position:absolute;left:-9999px;top:0;padding-left:2em}
.selsecond .index li:nth-child(2) a span{left:12em;z-index:99}
.selsecond .index li:nth-child(2) a {font-weight:bold;}
.selfirst .index li:first-child a span{left:12em;z-index:99}
.selfirst .index li:first-child a {font-weight:bold;}
.gallery .index a:hover{ border: 1px solid #888888;}
.gallery .index a:hover span{left:12em;z-index:100}
.gallery .index a span img{ }
.gallery .index a span { white-space:nowrap; }
.script {border:1px solid black;background-color:#fff;width:88ex;padding:1ex;}
		</style>

		<title>imscript tutorial</title>
	</head>

	<body>
		<h1>imscript tutorial</h1>


		<p>
		Imscript is a collection of simple programs for doing image
		processing in a Unix environment.
		</p>

		<h2>0. Philosophy</h2>

		<p>
		This is just vanilla unix philosophy with some specificities for
		images:
		</p>

		<ul>
			<li>each program does one thing and does it well</li>
			<li>programs work together</li>
			<li>offer mechanism, not policy</li>
			<li>images are arrays of numbers, representable by text files</li>
		</ul>

		<p>
		Notice that imscript programs will read any common image format, but
		will only write asc, pnm, png, and tiff.
		</p>

		<h2>1. Overview</h2>

		<!--
		<ol>
			<li><b>Filters:</b> read one image and write one image of the same size</li>
				<ul>
					<li><code>blur</code>: convolve an image by a shift-invariant user-specified kernel</li>
					<li><code>morsi</code>: apply a morphological operation with a user-specified element</li>
					<li><code>qeasy</code>: re-scale the dynamic range of an image</li>
					<li><code>qauto</code>: re-scale the dynamic range of an image, automatically</li>
					<li><code>palette</code>: colorize a grayscale image using a palette</li>
					<li><code>dither</code>: binarize an image by error diffusion</li>
					<li><code>iion</code>: copy named input to named output (useful to change file format)</li>
				</ul>
			</li>
		</ol>
		-->

<pre>

1. <a href="#sec-filters">Filters</a>: read one image and write one image of the same size
	- <a href="#sec-blur">blur</a>: convolve an image by a shift-invariant user-specified kernel
	- <a href="#sec-morsi">morsi</a>: apply a morphological operation with a user-specified element
	- <a href="#sec-qeasy">qeasy</a>: re-scale the dynamic range of an image
	- <a href="#sec-qauto">qauto</a>: re-scale the dynamic range of an image, automatically
	- <a href="#sec-palette">palette</a>: colorize a grayscale image using a palette
	- <a href="#sec-dither">dither</a>: binarize an image by error diffusion
	- <a href="#sec-iion">iion</a>: copy named input to named output (useful to change file format)

2. <a href="#sec-accumulators">Accumulators</a>: combine several images into one
	- <a href="#sec-plambda">plambda</a>: apply an arbitrary pixel-wise expression, given explicitly
	- <a href="#sec-veco">veco</a>: generic pixel-wise expressions for gray images, gray output
	- <a href="#sec-vecov">vecov</a>: generic pixel-wise expressions for color images, color output
	- <a href="#sec-vecoh">vecoh</a>: generic pixel-wise operations for gray images, color output
	- <a href="#sec-tbcat">tbcat</a>: concatenate two image (top-bottom)
	- <a href="#sec-lrcat">lrcat</a>: concatenate two image (left-right)

3. <a href="#sec-queries">Queries</a>: extract data from one image
	- <a href="#sec-imprintf">imprintf</a>: print a formatted string of image data
	- <a href="#sec-ghisto">ghisto</a>: common histogram
	- <a href="#sec-contihist">contihist</a>: continuous histogram
	- <a href="#sec-viewflow">viewflow</a>:  represent a vector field using a color code
	- <a href="#sec-flowarrows">flowarrows</a>: represent a vector field using arrows

4. <a href="#sec-interpolators">Interpolators</a>: fill-in the holes of one image
	- <a href="#sec-nnint">nnint</a>: nearest neighbor interpolation
	- <a href="#sec-bdint">bdint</a>: interpolation from the boundary of each hole
	- <a href="#sec-simpois">simpois</a>: poisson, laplace and biharmonic interpolators
	- <a href="#sec-amle">amle</a>: absolutely minimizing lipschitz extension

5. <a href="#sec-rescalers">Rescalers</a>: produce an image of different size or shape
	- <a href="#sec-downsa">downsa</a>: zoom out by combining blocks of pixels
	- <a href="#sec-upsa">upsa</a>: zoom in by interpolation inside cells
	- <a href="#sec-ntiply">ntiply</a>: zoom in by pixel replication
	- <a href="#sec-imflip">imflip</a>: rotate or transpose the image domain
	- <a href="#sec-homwarp">homwarp</a>: apply an arbitrary homography to the image domain

6. <a href="#sec-transforms">Frequecy domains</a>:
	- <a href="#sec-fft">fft</a>: discrete Fourier transform (direct)
	- <a href="#sec-ifft">ifft</a>: discrete Fourier transform (inverse)
	- <a href="#sec-dct">dct</a>: discrete cosine transform
	- <a href="#sec-dht">dht</a>: discrete Hartley transform

7. <a href="#sec-points">Point processing</a>:
	- <a href="#sec-pview">pview</a>: display points or matches as an image
	- <a href="#sec-ransac">ransac</a>: generic ransac implementation
	- <a href="#sec-srmatch">srmatch</a>: multi-scale sift matching for registration
	- <a href="#sec-plyflatten">plyflatten</a>: project 3D points into a 2.5D representation
	- <a href="#sec-colormesh">colormesh</a>: build 3D mesh from calibrated 2.5D representation
	- <a href="#sec-ijmesh">ijmesh</a>: build 3D mesh from non-calibrated 2.5D representation

8. <a href="#sec-suites">Multi-program suites</a>:
	- <a href="#sec-siftu">siftu</a>: operations for sift keypoints
	- <a href="#sec-tiffu">tiffu</a>: operations for tiff files
	- <a href="#sec-fontu">fontu</a>: operations for bitmapped fonts

9. <a href="#sec-miscellaneous">Miscellaneous</a>:
	- <a href="#sec-synflow">synflow</a>: generate a synthetic optical flow field
	- <a href="#sec-ccproc">ccproc</a>: connected component filtering
	- <a href="#sec-ihough2">ihough2</a>: generic hough transform (for straight lines)
	- <a href="#sec-tdip">tdip</a>: cylindrical hough transform (for sinusoids)
	- <a href="#sec-rpc_pm">rpc_pm</a>: patch match in the altitude domain
	- <a href="#sec-distance">distance</a>: distance function to a given set of points
	- <a href="#sec-sdistance">sdistance</a>: signed distance to the boundaries of a binary image
	- <a href="#sec-ppsmooth">ppsmooth</a>: periodic + smooth image decomposition
	- <a href="#sec-pmba2">pmba2</a>: poor man bundle adjustment
	- <a href="#sec-tcregistration">tcregistration</a>: register two images by translation

10. <a href="#sec-interactive">Interactive programs</a>:
	- <a href="#sec-fpan">fpan</a>: display an image with panning, zooming, and contrast changes
	- <a href="#sec-fpantiff">fpantiff</a>: like fpan, but understands image pyramids
	- <a href="#sec-rpcflip">rpcflip</a>: display several calibrated satellite images
	- <a href="#sec-powerkill">powerkill</a>: fourier-domain band-pas filter editor
	- <a href="#sec-epiview">epiview</a>: visualize the epipolar geometry between two images
	- <a href="#sec-viho">viho</a>: interactive homographic visualization
	- <a href="#sec-dosdo">dosdo</a>: look at an image and its fourier transform
	- <a href="#sec-icrop">icrop</a>: interactive crop
	- <a href="#sec-vnav">vnav</a>: visualize cylindrical images
</pre>


<h2>2. Examples</h2>

<a name="sec-filters"></a>
<h3>2.1. Filters</h3>

<a name="sec-blur"></a>
<p>
Gaussian <b>blur</b> of different sizes

<pre class="script">
blur gaussian 1 A.png A_gaussian_1.png
blur gaussian 3 A.png A_gaussian_3.png
blur gaussian 8 A.png A_gaussian_8.png
</pre>

<div class="gallery selsecond" style="height:321">
	<ul class="index">
		<li><a>A.png<span><img src="f/A.png" /></span></a></li>
		<li><a>A_gaussian_1.png<span><img src="f/A_gaussian_1.png" /></span></a></li>
		<li><a>A_gaussian_3.png<span><img src="f/A_gaussian_3.png" /></span></a></li>
		<li><a>A_gaussian_8.png<span><img src="f/A_gaussian_8.png" /></span></a></li>
	</ul>
</div>
</p>

<p>
Gaussian <b>blur</b> with different <b>boundary conditions</b>:
<pre class="script">
blur gaussian 5 -s A.png A_gaussian_5_s.png    # symmetric boundary
blur gaussian 5 -p A.png A_gaussian_5_p.png    # periodic boundary
blur gaussian 5 -z A.png A_gaussian_5_z.png    # zero boundary
</pre>
<div class="gallery selsecond" style="height:321px">
	<ul class="index">
		<li><a>A.png<span><img src="f/A.png" /></span></a></li>
		<li><a>A_gaussian_5_s.png<span><img src="f/A_gaussian_5_s.png" /></span></a></li>
		<li><a>A_gaussian_5_p.png<span><img src="f/A_gaussian_5_p.png" /></span></a></li>
		<li><a>A_gaussian_5_z.png<span><img src="f/A_gaussian_5_z.png" /></span></a></li>
	</ul>
</div>
</p>


<p>
<b>Blur</b> with different <b>kernels</b> of the "same" width:
<pre class="script">
blur square  11 A.png A_s.png
blur gaussian 5 A.png A_g.png
blur laplace  5 A.png A_l.png
blur disk     5 A.png A_d.png
blur cauchy   2 A.png A_c.png
blur inverse  1 -p A.png | qauto -i -p 1 - A_i.png
</pre>
<div class="gallery selsecond" style="height:321px">
	<ul class="index">
		<li><a>A.png<span><img src="f/A.png" /></span></a></li>
		<li><a>A_s.png<span><img src="f/A_s.png" /></span></a></li>
		<li><a>A_g.png<span><img src="f/A_g.png" /></span></a></li>
		<li><a>A_l.png<span><img src="f/A_l.png" /></span></a></li>
		<li><a>A_d.png<span><img src="f/A_d.png" /></span></a></li>
		<li><a>A_c.png<span><img src="f/A_c.png" /></span></a></li>
		<li><a>A_i.png<span><img src="f/A_i.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-morsi"></a>
<p>
<b>morsi cross:</b> morphological operations with a cross structuring element:
<pre class="script">
morsi cross erosion       A.png A_x_erosion.png
morsi cross dilation      A.png A_x_dilation.png
morsi cross median        A.png A_x_median.png
morsi cross opening       A.png A_x_opening.png
morsi cross closing       A.png A_x_closing.png
morsi cross gradient      A.png A_x_gradient.png
morsi cross igradient     A.png A_x_igradient.png
morsi cross egradient     A.png A_x_egradient.png
morsi cross laplacian     A.png | qeasy 40 -40 - A_x_laplacian.png
morsi cross enhance       A.png A_x_enhance.png
morsi cross tophat        A.png | qeasy  0 60 - A_x_tophat.png
morsi cross bothat        A.png | qeasy  0 60 - A_x_bothat.png
morsi cross oscillation   A.png | qeasy  0 60 - A_x_oscillation.png
</pre>
<div class="gallery selfirst" style="height:521px">
	<ul class="index">
		<li><a>A<span><img src="f/A.png" /></span></a></li>
		<li><a>A_x_erosion.png<span><img src="f/A_x_erosion.png" /></span></a></li>
		<li><a>A_x_dilation.png<span><img src="f/A_x_dilation.png" /></span></a></li>
		<li><a>A_x_median.png<span><img src="f/A_x_median.png" /></span></a></li>
		<li><a>A_x_opening.png<span><img src="f/A_x_opening.png" /></span></a></li>
		<li><a>A_x_closing.png<span><img src="f/A_x_closing.png" /></span></a></li>
		<li><a>A_x_gradient.png<span><img src="f/A_x_gradient.png" /></span></a></li>
		<li><a>A_x_igradient.png<span><img src="f/A_x_igradient.png" /></span></a></li>
		<li><a>A_x_egradient.png<span><img src="f/A_x_egradient.png" /></span></a></li>
		<li><a>A_x_laplacian.png<span><img src="f/A_x_laplacian.png" /></span></a></li>
		<li><a>A_x_enhance.png<span><img src="f/A_x_enhance.png" /></span></a></li>
		<li><a>A_x_tophat.png<span><img src="f/A_x_tophat.png" /></span></a></li>
		<li><a>A_x_bothat.png<span><img src="f/A_x_bothat.png" /></span></a></li>
		<li><a>A_x_oscillation.png<span><img src="f/A_x_oscillation.png" /></span></a></li>
	</ul>
</div>
</p>

<p>
<b>morsi disk5:</b> morphological operations with disk structuring element of radius 5 pixels:
<pre class="script">
morsi disk5 erosion       A.png A_d5_erosion.png
morsi disk5 dilation      A.png A_d5_dilation.png
morsi disk5 median        A.png A_d5_median.png
morsi disk5 opening       A.png A_d5_opening.png
morsi disk5 closing       A.png A_d5_closing.png
morsi disk5 gradient      A.png A_d5_gradient.png
morsi disk5 igradient     A.png A_d5_igradient.png
morsi disk5 egradient     A.png A_d5_egradient.png
morsi disk5 laplacian     A.png | qeasy 90 -90 - A_d5_laplacian.png
morsi disk5 enhance       A.png A_d5_enhance.png
morsi disk5 tophat        A.png | qeasy 0 100 - A_d5_tophat.png
morsi disk5 bothat        A.png | qeasy 0 100 - A_d5_bothat.png
morsi disk5 oscillation   A.png | qeasy 0 100 - A_d5_oscillation.png
</pre>
<div class="gallery selfirst" style="height:521px">
	<ul class="index">
		<li><a>A.png<span><img src="f/A.png" /></span></a></li>
		<li><a>A_d5_erosion.png<span><img src="f/A_d5_erosion.png" /></span></a></li>
		<li><a>A_d5_dilation.png<span><img src="f/A_d5_dilation.png" /></span></a></li>
		<li><a>A_d5_median.png<span><img src="f/A_d5_median.png" /></span></a></li>
		<li><a>A_d5_opening.png<span><img src="f/A_d5_opening.png" /></span></a></li>
		<li><a>A_d5_closing.png<span><img src="f/A_d5_closing.png" /></span></a></li>
		<li><a>A_d5_gradient.png<span><img src="f/A_d5_gradient.png" /></span></a></li>
		<li><a>A_d5_igradient.png<span><img src="f/A_d5_igradient.png" /></span></a></li>
		<li><a>A_d5_egradient.png<span><img src="f/A_d5_egradient.png" /></span></a></li>
		<li><a>A_d5_laplacian.png<span><img src="f/A_d5_laplacian.png" /></span></a></li>
		<li><a>A_d5_enhance.png<span><img src="f/A_d5_enhance.png" /></span></a></li>
		<li><a>A_d5_tophat.png<span><img src="f/A_d5_tophat.png" /></span></a></li>
		<li><a>A_d5_bothat.png<span><img src="f/A_d5_bothat.png" /></span></a></li>
		<li><a>A_d5_oscillation.png<span><img src="f/A_d5_oscillation.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-qeasy"></a>
<p>
<b>qeasy:</b> linear contrast change with manually chosen parameters:
<pre class="script">
qeasy 20 200   A.png A_saturated.png
qeasy 0 1000   A.png A_darkened.png
qeasy -300 300 A.png A_bleached.png
</pre>
<div class="gallery selfirst" style="height:321px">
	<ul class="index">
		<li><a>A.png<span><img src="f/A.png" /></span></a></li>
		<li><a>A_saturated.png<span><img src="f/A_saturated.png" /></span></a></li>
		<li><a>A_darkened.png<span><img src="f/A_darkened.png" /></span></a></li>
		<li><a>A_bleached.png<span><img src="f/A_bleached.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-qauto"></a>
<p>
<b>qauto:</b> linear contrast change with automatically chosen parameters:
<pre class="script">
qauto       lenac.png lenac_qauto.png
qauto -p 10 lenac.png lenac_qauto_p10.png
qauto -i    lenac.png lenac_qauto_i.png
</pre>
<div class="gallery selfirst" style="height:321px">
	<ul class="index">
		<!--
		<li><a>input image    <span><img src="f/lenac.png" /></span></a></li>
		<li><a>qauto<span><img src="f/lenac_qauto.png" /></span></a></li>
		<li><a>qauto -p 10<span><img src="f/lenac_p10_qauto.png" /></span></a></li>
		<li><a>qauto -i<span><img src="f/lenac_iqauto.png" /></span></a></li>
		-->
		<li><a>lenac.png<span><img src="f/lenac.png" /></span></a></li>
		<li><a>lenac_qauto.png<span><img src="f/lenac_qauto.png" /></span></a></li>
		<li><a>lenac_qauto_p10.png<span><img src="f/lenac_qauto_p10.png" /></span></a></li>
		<li><a>lenac_qauto_i.png<span><img src="f/lenac_qauto_i.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-palette"></a>
<p>
<b>palette:</b> apply a palette to a scalar-valued image (the -l option is
optional and writes the associated legend).  The palette name can be a
pre-defined palette or a gimp palette file:
<pre class="script">
qauto X.tif X.png
palette 0 1000 dem       X.tif X_dem1000.png    -l leg_dem1000.png
palette 0 2000 dem       X.tif X_dem2000.png    -l leg_dem2000.png
palette 0  500 dem       X.tif X_dem500.png     -l leg_dem500.png
palette nan nan gray     X.tif X_gray.png       -l leg_gray.png
palette nan 1000 jet.gpl X.tif X_jet.png        -l leg_jet.png
palette 0 2000 nice      X.tif X_nice.png       -l leg_nice.png
palette 0 2000 nnice     X.tif X_nnice.png      -l leg_nnice.png
</pre>
<div class="gallery selsecond" style="height:512px">
	<ul class="index">
		<li><a>X.png        <span><img src="f/X.png"         /></span></a></li>
		<li><a>X_dem1000.png<span><img src="f/X_dem1000.png" /><img src="f/leg_dem1000.png" /></span></a></li>
		<li><a>X_dem2000.png<span><img src="f/X_dem2000.png" /><img src="f/leg_dem2000.png" /></span></a></li>
		<li><a>X_dem500.png <span><img src="f/X_dem500.png"  /><img src="f/leg_dem500.png" /></span></a></li>
		<li><a>X_gray.png   <span><img src="f/X_gray.png"    /><img src="f/leg_gray.png" /></span></a></li>
		<li><a>X_jet.png    <span><img src="f/X_jet.png"     /><img src="f/leg_jet.png" /></span></a></li>
		<li><a>X_nice.png   <span><img src="f/X_nice.png"    /><img src="f/leg_nice.png" /></span></a></li>
		<li><a>X_nnice.png  <span><img src="f/X_nnice.png"   /><img src="f/leg_nnice.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-dither"></a>
<p>
<b>dither:</b> halftoning by error diffusion:
<pre class="script">
dither lena.png lena_dithered.png
blur C 1 lena.png | qauto | dither - lena_dithered_c.png
</pre>
<div class="gallery selsecond" style="height:256px">
	<ul class="index">
		<li><a>lena.png<span><img src="f/lena.png" /></span></a></li>
		<li><a>lena_dithered.png<span><img src="f/lena_dithered.png" /></span></a></li>
		<li><a>lena_dithered_c.png<span><img src="f/lena_dithered_c.png" /></span></a></li>
		<!--
dither A.png dithered_A.png
blur C 1 A.png | qauto | dither - cauchydithered_A.png
blur C 1 A.png | qauto -i | dither - cauchydithered_iA.png
blur -s C 1 A.png | qauto -i | dither - scauchydithered_iA.png
		<li><a>input image A<span><img src="f/A.png" /></span></a></li>
		<li><a>dither<span><img src="f/dithered_A.png" /></span></a></li>
		<li><a>blur C 1 | dither<span><img src="f/cauchydithered_A.png" /></span></a></li>
		<li><a>blur C 1 | qauto -i | dither<span><img src="f/cauchydithered_iA.png" /></span></a></li>
		<li><a>blur -s C 1 | qauto -i | dither<span><img src="f/scauchydithered_iA.png" /></span></a></li>
		-->
	</ul>
</div>
</p>

<a name="sec-accumulators"></a>
<h3>2.2. Accumulators</h3>

<a name="sec-plambda"></a>
<p>
<b>plambda:</b> apply an arithmetic expression with input images (the
expression is written in <a
href="https://en.wikipedia.org/wiki/Reverse_Polish_notation">reverse polish
notation</a>).  Common arithmetic operators and all functions from
<code>math.h</code> are allowed.
<pre class="script">
plambda a.png b.png +        -o ab_sum.png
plambda a.png b.png -        -o ab_dif.png
plambda a.png b.png "*"      -o ab_mul.png
plambda a.png b.png /        -o ab_div.png
plambda a.png b.png "+ 2 /"  -o ab_avg.png
plambda a.png b.png "* sqrt" -o ab_geo.png
plambda a.png b.png fmin     -o ab_min.png
plambda a.png b.png fmax     -o ab_max.png
</pre>
<div class="gallery selsecond" style="height:321px">
	<ul class="index">
		<li><a>a.png &nbsp; &nbsp; b.png<span><img src="f/a.png" /><img src="f/b.png" /></span></a></li>
		<li><a>ab_sum.png<span><img src="f/ab_sum.png" /></span></a></li>
		<li><a>ab_dif.png<span><img src="f/ab_dif.png" /></span></a></li>
		<li><a>ab_mul.png<span><img src="f/ab_mul.png" /></span></a></li>
		<li><a>ab_div.png<span><img src="f/ab_div.png" /></span></a></li>
		<li><a>ab_avg.png<span><img src="f/ab_avg.png" /></span></a></li>
		<li><a>ab_geo.png<span><img src="f/ab_geo.png" /></span></a></li>
		<li><a>ab_min.png<span><img src="f/ab_min.png" /></span></a></li>
		<li><a>ab_max.png<span><img src="f/ab_max.png" /></span></a></li>
	</ul>
</div>
</p>

<p>
The <b>plambda</b> language allows many operations, even when applied to a single image.
See the external plambda tutorial for a comprehensive description.
Here are some silly examples:
<pre class="script">
plambda b.png "a[2] a[1] a[0] join3" -o b_bgr.png     # swap colors
plambda b.png "a[0] a[1] a[2] join3" -o b_rgb.png     # do nothing
plambda b.png "randg 20 * +"         -o b_noisy.png   # add luminance noise
plambda b.png "a(1,0) a -"           -o b_dx.png      # x-derivative
plambda b.png "a(1,0) a - 127 +"     -o b_dx_127.png  # x-derivative plus 127
plambda b.png a,x                    -o b_dx_alt.png  # x-derivative (easier)
plambda b.png "a,x a,y hypot 2 *"    -o b_edges.png   # gradient norm
plambda b.png ":y 50 * sin 50 * +"   -o b_bands.png   # sine of y plus image
plambda b.png ":r 50 * sin 50 * +"   -o b_rings.png   # sine of r plus image
plambda b.png ":i 8 fmod not  :j 30 fmod not  or 99 * +" -o b_grid.png
</pre>
<div class="gallery selsecond" style="height:421px">
	<ul class="index">
		<li><a>b.png<span><img     src="f/b.png" /></span></a></li>
		<li><a>b_bgr.png<span><img src="f/b_bgr.png" /></span></a></li>
		<li><a>b_rgb.png<span><img src="f/b_rgb.png" /></span></a></li>
		<li><a>b_noisy.png<span><img src="f/b_noisy.png" /></span></a></li>
		<li><a>b_dx.png<span><img src="f/b_dx.png" /></span></a></li>
		<li><a>b_dx_127.png<span><img src="f/b_dx_127.png" /></span></a></li>
		<li><a>b_dx_alt.png<span><img src="f/b_dx_alt.png" /></span></a></li>
		<li><a>b_edges.png<span><img src="f/b_edges.png" /></span></a></li>
		<li><a>b_bands.png<span><img src="f/b_bands.png" /></span></a></li>
		<li><a>b_rings.png<span><img src="f/b_rings.png" /></span></a></li>
		<li><a>b_grid.png<span><img src="f/b_grid.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-lrcat"></a>
<a name="sec-tbcat"></a>
<p>
The <b>lrcat</b> and <b>tbcat</b> programs concatenate two images horizontally or vertically.
They need not be of the same size.
<pre class="script">
lrcat a.png b.png ab_lr.png
tbcat a.png b.png ab_tb.png
lrcat a.png b.png | tbcat - lena.png ab_montage.png
lrcat a.png b.png | BACKGROUND=255 tbcat - lena.png ab_montage2.png
</pre>
<div class="gallery" style="height:512px">
	<ul class="index">
		<li><a>ab_lr.png<span><img src="f/ab_lr.png" /></span></a></li>
		<li><a>ab_tb.png<span><img src="f/ab_tb.png" /></span></a></li>
		<li><a>ab_montage.png<span><img src="f/ab_montage.png" /></span></a></li>
		<li><a>ab_montage2.png<span><img src="f/ab_montage2.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-vecov"></a>
<p>
The <b>vecov</b> program aggregates the pixel values of many images.
<pre class="script">
vecov avg pRi*.jpg -o outv_avg.png
vecov min pRi*.jpg -o outv_min.png
vecov max pRi*.jpg -o outv_max.png
vecov med pRi*.jpg -o outv_med.png      # geometric medoid
vecov modc pRi*.jpg -o outv_modc.png    # component-wise mode
</pre>
<div class="gallery selfirst" style="height:572px">
	<ul class="index">
		<li><a>outv_avg.png<span><img src="f/outv_avg.png" /></span></a></li>
		<li><a>outv_min.png<span><img src="f/outv_min.png" /></span></a></li>
		<li><a>outv_max.png<span><img src="f/outv_max.png" /></span></a></li>
		<li><a>outv_med.png<span><img src="f/outv_med.png" /></span></a></li>
		<li><a>outv_modc.png<span><img src="f/outv_modc.png" /></span></a></li>
		<li><a>pRi00.jpg<span><img src="f/pRi00.jpg" /></span></a></li>
		<li><a>pRi01.jpg<span><img src="f/pRi01.jpg" /></span></a></li>
		<li><a>pRi02.jpg<span><img src="f/pRi02.jpg" /></span></a></li>
		<li><a>pRi03.jpg<span><img src="f/pRi03.jpg" /></span></a></li>
		<li><a>pRi04.jpg<span><img src="f/pRi04.jpg" /></span></a></li>
		<li><a>pRi05.jpg<span><img src="f/pRi05.jpg" /></span></a></li>
		<li><a>pRi06.jpg<span><img src="f/pRi06.jpg" /></span></a></li>
		<li><a>pRi07.jpg<span><img src="f/pRi07.jpg" /></span></a></li>
		<li><a>pRi08.jpg<span><img src="f/pRi08.jpg" /></span></a></li>
		<li><a>pRi09.jpg<span><img src="f/pRi09.jpg" /></span></a></li>
		<li><a>pRi10.jpg<span><img src="f/pRi10.jpg" /></span></a></li>
		<li><a>pRi11.jpg<span><img src="f/pRi11.jpg" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-veco"></a>
<p>
The <b>veco</b> program is similar, but it only works for gray-scale images and
supports a much larger variety of accumulators (including very fancy ones).
<pre class="script">
veco max gpRi*.jpg -o out_max.png
veco euc gpRi*.jpg -o out_euc.png                # euclidean mean
veco avg gpRi*.jpg -o out_avg.png                # arithmetic mean
veco geo gpRi*.jpg -o out_geo.png                # geometric mean
veco har gpRi*.jpg -o out_har.png                # harmonic mean
veco min gpRi*.jpg -o out_min.png
veco lav gpRi*.jpg -o out_lav.png                # logarithmic average
veco lse gpRi*.jpg -o out_lse.png                # log-sum-exp (soft max)
veco mod gpRi*.jpg -o out_mod.png                # mode
veco med gpRi*.jpg -o out_med.png                # median
veco q25 gpRi*.jpg -o out_q25.png                # first quartile
veco q75 gpRi*.jpg -o out_q75.png                # third quartile
veco rnd gpRi*.jpg -o out_rnd.png                # random sample
veco std gpRi*.jpg | qeasy 0 20 - out_std.png    # standard deviation
veco iqd gpRi*.jpg | qeasy 0 20 - out_iqd.png    # interquartile distance
</pre>
<div class="gallery selfirst" style="height:532px">
	<ul class="index">
		<li><a>out_max.png<span><img src="f/out_max.png" /></span></a></li>
		<li><a>out_euc.png<span><img src="f/out_euc.png" /></span></a></li>
		<li><a>out_avg.png<span><img src="f/out_avg.png" /></span></a></li>
		<li><a>out_geo.png<span><img src="f/out_geo.png" /></span></a></li>
		<li><a>out_har.png<span><img src="f/out_har.png" /></span></a></li>
		<li><a>out_min.png<span><img src="f/out_min.png" /></span></a></li>
		<li><a>out_lav.png<span><img src="f/out_lav.png" /></span></a></li>
		<li><a>out_lse.png<span><img src="f/out_lse.png" /></span></a></li>
		<li><a>out_mod.png<span><img src="f/out_mod.png" /></span></a></li>
		<li><a>out_med.png<span><img src="f/out_med.png" /></span></a></li>
		<li><a>out_q25.png<span><img src="f/out_q25.png" /></span></a></li>
		<li><a>out_q75.png<span><img src="f/out_q75.png" /></span></a></li>
		<li><a>out_rnd.png<span><img src="f/out_rnd.png" /></span></a></li>
		<li><a>out_std.png<span><img src="f/out_std.png" /></span></a></li>
		<li><a>out_iqd.png<span><img src="f/out_iqd.png" /></span></a></li>
	</ul>
</div>
</p>

<!-- NOTE: commented because there are problems with this algorithm
<p>
Further veco stuff
<pre>
veco F2.1 gpRi*jpg -o out_F21.png
veco F2.0 gpRi*jpg -o out_F20.png
veco F1.9 gpRi*jpg -o out_F19.png
veco F1.5 gpRi*jpg -o out_F15.png
veco F1.1 gpRi*jpg -o out_F11.png
veco F1.0 gpRi*jpg -o out_F10.png
veco F0.9 gpRi*jpg -o out_F09.png
veco F0.8 gpRi*jpg -o out_F08.png
veco F0.7 gpRi*jpg -o out_F07.png
veco F0.6 gpRi*jpg -o out_F06.png
veco F0.5 gpRi*jpg -o out_F05.png
veco F0.4 gpRi*jpg -o out_F04.png
veco F0.3 gpRi*jpg -o out_F03.png
veco F0.2 gpRi*jpg -o out_F02.png
veco F0.1 gpRi*jpg -o out_F01.png
</pre>
<div class="gallery selfirst" style="height:532px">
	<ul class="index">
		<li><a>out_F21.png<span><img src="f/out_F21.png" /></span></a></li>
		<li><a>out_F20.png<span><img src="f/out_F20.png" /></span></a></li>
		<li><a>out_avg.png<span><img src="f/out_avg.png" /></span></a></li>
		<li><a>out_F19.png<span><img src="f/out_F19.png" /></span></a></li>
		<li><a>out_F15.png<span><img src="f/out_F15.png" /></span></a></li>
		<li><a>out_F11.png<span><img src="f/out_F11.png" /></span></a></li>
		<li><a>out_F10.png<span><img src="f/out_F10.png" /></span></a></li>
		<li><a>out_med.png<span><img src="f/out_med.png" /></span></a></li>
		<li><a>out_F09.png<span><img src="f/out_F09.png" /></span></a></li>
		<li><a>out_F08.png<span><img src="f/out_F08.png" /></span></a></li>
		<li><a>out_F07.png<span><img src="f/out_F07.png" /></span></a></li>
		<li><a>out_F06.png<span><img src="f/out_F06.png" /></span></a></li>
		<li><a>out_F05.png<span><img src="f/out_F05.png" /></span></a></li>
		<li><a>out_F04.png<span><img src="f/out_F04.png" /></span></a></li>
		<li><a>out_F03.png<span><img src="f/out_F03.png" /></span></a></li>
		<li><a>out_F02.png<span><img src="f/out_F02.png" /></span></a></li>
		<li><a>out_F01.png<span><img src="f/out_F01.png" /></span></a></li>
		<li><a>out_mod.png<span><img src="f/out_mod.png" /></span></a></li>
	</ul>
</div>
</p>
-->

<a name="sec-vecoh"></a>
<p>
The <b>vecoh</b> program also works with gray-scale images and it finds
clusters of values at each pixel.  The output is a 8-dimesional image, on the
first component the number of clusters, and on the rest, the cluster centers.
<pre class="script">
vecoh kmeans    gpRi*jpg | plambda - "x[0] 0 4 qe" -o kmeans_count.png
vecoh kmedians  gpRi*jpg | plambda - "x[0] 0 4 qe" -o kmedians_count.png
vecoh contrario gpRi*jpg | plambda - "x[0] 0 4 qe" -o contrario_count.png
vecoh kmeans    gpRi*jpg | plambda - "x[1]"        -o kmeans_k1.png
vecoh kmeans    gpRi*jpg | plambda - "x[2]"        -o kmeans_k2.png
vecoh kmeans    gpRi*jpg | plambda - "x[3]"        -o kmeans_k3.png
vecoh kmeans    gpRi*jpg | plambda - "x[4]"        -o kmeans_k4.png
vecoh kmedians  gpRi*jpg | plambda - "x[1]"        -o kmedians_k1.png
vecoh kmedians  gpRi*jpg | plambda - "x[2]"        -o kmedians_k2.png
vecoh kmedians  gpRi*jpg | plambda - "x[3]"        -o kmedians_k3.png
vecoh kmedians  gpRi*jpg | plambda - "x[4]"        -o kmedians_k4.png
vecoh contrario gpRi*jpg | plambda - "x[1]"        -o contrario_k1.png
vecoh contrario gpRi*jpg | plambda - "x[2]"        -o contrario_k2.png
</pre>
<div class="gallery selfirst" style="height:532px">
	<ul class="index">
		<li><a>kmeans_count.png<span><img src="f/kmeans_count.png" /></span></a></li>
		<li><a>kmedians_count.png<span><img src="f/kmedians_count.png" /></span></a></li>
		<li><a>contrario_count.png<span><img src="f/contrario_count.png" /></span></a></li>
		<li><a>kmeans_k1.png<span><img src="f/kmeans_k1.png" /></span></a></li>
		<li><a>kmeans_k2.png<span><img src="f/kmeans_k2.png" /></span></a></li>
		<li><a>kmeans_k3.png<span><img src="f/kmeans_k3.png" /></span></a></li>
		<li><a>kmeans_k4.png<span><img src="f/kmeans_k4.png" /></span></a></li>
		<li><a>kmedians_k1.png<span><img src="f/kmedians_k1.png" /></span></a></li>
		<li><a>kmedians_k2.png<span><img src="f/kmedians_k2.png" /></span></a></li>
		<li><a>kmedians_k3.png<span><img src="f/kmedians_k3.png" /></span></a></li>
		<li><a>kmedians_k4.png<span><img src="f/kmedians_k4.png" /></span></a></li>
		<li><a>contrario_k1.png<span><img src="f/contrario_k1.png" /></span></a></li>
		<li><a>contrario_k2.png<span><img src="f/contrario_k2.png" /></span></a></li>
	</ul>
</div>
</p>


<a name="sec-queries"></a>
<h3>2.3. Queries</h3>

<!--
	imprintf
	ghisto
	contihist
	viewflow
	flowarrors
-->

<a name="sec-interpolators"></a>
<h3>2.4. Interpolators</h3>

<!--
	nnint
	bdint
	simpois
	amle
-->

<a name="sec-nnint"></a>
<a name="sec-bdint"></a>
<a name="sec-simpois"></a>
<a name="sec-amle"></a>
<p>
These interpolating filters are used to fill-in the missing values of an image
(by default, indicated by a floating point NAN).
<!-- plambda mask.png barbara.png "nan if" -o masked.tif-->
<pre class="script">
qeasy 0 255 masked.tif masked.png
cat masked.tif | nnint             - out_nnint.png        # nearest-neighbor
cat masked.tif | bdint -a min      - out_bdmin.png        # boundary minimum
cat masked.tif | bdint -a max      - out_bdmax.png        # boundary maximum
cat masked.tif | bdint -a avg      - out_bdavg.png        # boundary average
cat masked.tif | simpois          -o out_laplace.png      # harmonic
cat masked.tif | simpois -t -0.08 -o out_biharm.png       # biharmonic
</pre>
<div class="gallery selsecond" style="height:572px">
	<ul class="index">
		<li><a>masked.png<span><img src="f/masked.png" /></span></a></li>
		<li><a>out_nnint.png<span><img src="f/out_nnint.png" /></span></a></li>
		<li><a>out_bdmin.png<span><img src="f/out_bdmin.png" /></span></a></li>
		<li><a>out_bdmax.png<span><img src="f/out_bdmax.png" /></span></a></li>
		<li><a>out_bdavg.png<span><img src="f/out_bdavg.png" /></span></a></li>
		<li><a>out_laplace.png<span><img src="f/out_laplace.png" /></span></a></li>
		<li><a>out_biharm.png<span><img src="f/out_biharm.png" /></span></a></li>
		<li><a>out_amle.png<span><img src="f/out_amle.png" /></span></a></li>
		<li><a>mask.png<span><img src="f/mask.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-rescalers"></a>
<h3>2.5. Rescalers</h3>

<!--
	downsa
	upsa
	ntiply
	imflip
	homwarp
-->


<a name="sec-transforms"></a>
<h3>2.6. Transforms</h3>

<!--
	fft
	ifft
	dct
	dht
	fftshift
-->

<a name="sec-fft"></a>
<a name="sec-ifft"></a>
<a name="sec-dct"></a>
<a name="sec-dht"></a>
<p>
The <b>fft</b>, <b>ifft</b>, <b>dct</b> and <b>dht</b> programs are filters tha
compute, respectively, the discrete Fourier transform, its inverse, the
discrete cosine transform and the discrete Hartley transform.
The DCT and the DHT are self-inverses, and the IFFT is the inverse of the FFT.
<pre class="script">
cat barb.png | fft | plambda vnorm       | qauto -p 1 - barb_dft_abs.png
cat barb.png | fft | plambda "x[0]"      | qauto -p 1 - barb_dft_re.png
cat barb.png | fft | plambda "x[1]"      | qauto -p 1 - barb_dft_im.png
cat barb.png | fft | plambda "x[0] fabs" | qauto -p 1 - barb_dft_are.png
cat barb.png | fft | plambda "x[1] fabs" | qauto -p 1 - barb_dft_aim.png
cat barb.png | dht                       | qauto -p 1 - barb_dht.png
cat barb.png | dht | plambda fabs        | qauto -p 1 - barb_dht_abs.png 
cat barb.png | dct                       | qauto -p 1 - barb_dct.png
cat barb.png | dct | plambda fabs             | qauto -p 1 - barb_dct_abs.png 
</pre>
<div class="gallery selsecond" style="height:572px">
	<ul class="index">
		<li><a>barb.png<span><img src="f/barb.png" /></span></a></li>
		<li><a>barb_dft_abs.png<span><img src="f/barb_dft_abs.png" /></span></a></li>
		<li><a>barb_dft_re.png<span><img src="f/barb_dft_re.png" /></span></a></li>
		<li><a>barb_dft_im.png<span><img src="f/barb_dft_im.png" /></span></a></li>
		<li><a>barb_dft_are.png<span><img src="f/barb_dft_are.png" /></span></a></li>
		<li><a>barb_dft_aim.png<span><img src="f/barb_dft_aim.png" /></span></a></li>
		<li><a>barb_dht.png<span><img src="f/barb_dht.png" /></span></a></li>
		<li><a>barb_dht_abs.png<span><img src="f/barb_dht_abs.png" /></span></a></li>
		<li><a>barb_dct.png<span><img src="f/barb_dct.png" /></span></a></li>
		<li><a>barb_dct_abs.png<span><img src="f/barb_dct_abs.png" /></span></a></li>
		<li><a>barb_dft_abs_s.png<span><img src="f/barb_dft_abs_s.png" /></span></a></li>
		<li><a>barb_dht_abs_s.png<span><img src="f/barb_dht_s.png" /></span></a></li>
	</ul>
</div>
</p>

<a name="sec-fftshift"></a>
The <b>fftshift</b> filter applies a periodic half-size shift to an image so
that the origin of coordinates appears on the middle of the image; this is
useful for looking at the Fourier and Hartley transforms.
<pre class="script">
fftshift barb.png barb_s.png
cat barb.png | fft | plambda vnorm | fftshift | qauto -p 1 - barb_dft_s.png
cat barb.png | dht | plambda vnorm | fftshift | qauto -p 1 - barb_dht_abs_s.png
cat barb.png | dht                 | fftshift | qauto -p 1 - barb_dht_s.png
</pre>
<div class="gallery selsecond" style="height:572px">
	<ul class="index">
		<li><a>barb.png<span><img src="f/barb.png" /></span></a></li>
		<li><a>barb_s.png<span><img src="f/barb_s.png" /></span></a></li>
		<li><a>barb_dft_s.png<span><img src="f/barb_dft_s.png" /></span></a></li>
		<li><a>barb_dht_abs_s.png<span><img src="f/barb_dht_abs_s.png" /></span></a></li>
		<li><a>barb_dht_s.png<span><img src="f/barb_dht_s.png" /></span></a></li>
	</ul>
</div>
</p>


<a name="sec-points"></a>
<h3>2.7. Point processing</h3>

<!--
	pview
	ransac
	srmatch
	plyflatten
	colormesh
	ijmesh
-->

<a name="sec-suites"></a>
<h3>2.8. Multi-program suites</h3>

<!--
	siftu
	tiffu
	fontu
-->

<a name="sec-miscellaneous"></a>
<h3>2.9. Miscellaneous</h3>

<!--
	synflow
	ccproc
	ihough2
	tdip
	rpc_pm
	distance
	sdistance
	ppsmooth
	pmba2
	tcregistration
-->


<a name="sec-interactive"></a>
<h3>2.10. Interactive programs</h3>

<!--
	fpan
	fpantiff
	rpcflip
	powerkill
	epiview
	viho
	dosdo
	icrop
	vnav
-->


<h2>3. Constructions</h2>

<p>end</p>

	</body>
</html>

<!-- vim: ts=2 sw=2 spell spelllang=en
-->
